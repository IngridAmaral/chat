(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{29:function(e,t,s){},33:function(e,t,s){},34:function(e,t,s){},35:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){},57:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(1),r=s.n(a),c=s(20),o=s.n(c),i=(s(29),s(22)),u=s(3),l=s.n(u),m=s(4),d=s(5),g=s(6),h=s(8),p=s(7),f=s(21),j=s.n(f),v=function(e){return new Date(e).toUTCString().substring(4,22)},b=(s(33),function(e){var t=e.isUser,s=e.messageData,a=s.author,r=s.timestamp,c=s.message;return Object(n.jsxs)("div",{className:"message ".concat(t?"user-message":"received-message"),children:[!t&&Object(n.jsx)("span",{className:"message-author",children:a}),Object(n.jsx)("span",{className:"message-text",children:j.a.decode(c)}),Object(n.jsx)("span",{className:"message-timestamp",children:v(r)})]})});b.defaultProps={isUser:!1};var O=b,w=(s(34),function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(d.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"instant"})},e}return Object(g.a)(s,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){this.props.messages.length!==e.messages.length&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,s=t.activeUser,a=t.messages;return Object(n.jsxs)("div",{ref:this.mesRef,className:"messages",onScroll:this.handleScroll,children:[a.splice(46).map((function(e){return Object(n.jsx)(O,{isUser:e.author===s,messageData:e},e.timestamp)})),Object(n.jsx)("div",{id:"bottom",style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})}}]),s}(r.a.Component)),x=s(23),M=(s(35),function(e){var t=e.handleInput,s=e.newMessage;return Object(n.jsx)(x.a,{maxRows:3,minRows:1,className:"input-message",onChange:t,placeholder:"Type your message",value:s})}),N=(s(36),function(e){var t=e.sendMessage;return Object(n.jsx)("button",{type:"submit",className:"send-button",onClick:t,children:"Send"})}),k=(s(37),function(e){var t=e.handleInput,s=e.sendMessage,a=e.newMessage;return Object(n.jsxs)("div",{className:"form",children:[Object(n.jsx)(M,{handleInput:t,newMessage:a}),Object(n.jsx)(N,{sendMessage:s})]})}),y=s(9),U=s(10),D=s.n(U),E="E9vmJ8XvUYlu",S="https://chatty.kubernetes.doodle-test.com/api/chatty/v1.0/",I=function(){var e=D.a.create({baseURL:S});return e.interceptors.request.use((function(e){return Object(y.a)(Object(y.a)({},e),{},{params:Object(y.a)({header:{token:E}},e.params)})})),e}(),T=function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("?token=".concat(E)).then((function(e){return e.data})).catch((function(){return"Error"}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=(s(55),"Jessica"),J="FULLFILED",R=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(e){var n;return Object(d.a)(this,s),(n=t.call(this,e)).componentDidMount=function(){n.receiveMesssages()},n.receiveMesssages=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T();case 3:t=e.sent,n.setState({messages:t,loading:J}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({loading:"REJECTED"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handleNewMessage=function(e){var t=e.target.value;n.setState({newMessage:t})},n.sendMessage=function(e){var t,s=n.state,a=s.newMessage,r=s.activeUser;e.preventDefault(),a&&(t={message:a,author:r},D.a.post("".concat(S,"?token=").concat(E),t),n.addNewMessage())},n.addNewMessage=function(){var e=n.state,t=e.newMessage,s=e.activeUser,a=(new Date).getTime();n.setState((function(e){return{messages:[].concat(Object(i.a)(e.messages),[{message:t,id:t,timestamp:a,author:s}]),newMessage:""}}))},n.state={messages:[],loading:"PENDING",newMessage:"",activeUser:C},n}return Object(g.a)(s,[{key:"render",value:function(){var e=this.state,t=e.messages,s=e.loading,a=e.newMessage;return Object(n.jsxs)("div",{className:"chat",children:[s===J&&Object(n.jsx)(w,{newMessage:a,activeUser:C,messages:t}),Object(n.jsx)(k,{handleInput:this.handleNewMessage,sendMessage:this.sendMessage,newMessage:a})]})}}]),s}(r.a.Component);s(56);var B=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(R,{})})};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.f64a864a.chunk.js.map